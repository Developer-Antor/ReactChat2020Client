{"version":3,"sources":["Firebase/firebase.js","Context/StateProvider.js","Components/Chat.js","Context/Reducer.js","Components/Login.js","Assets/undraw_profile_pic_ic5t (1).png","Components/SidebarChats.js","Components/Sidebar.js","App.js","index.js"],"names":["app","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","provider","GoogleAuthProvider","StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","Chat","useState","input","setInput","messages","setMessages","user","roomId","useParams","roomName","setRoomName","useEffect","collection","doc","onSnapshot","snapshot","data","name","orderBy","docs","map","console","log","className","ArrowBack","onClick","document","querySelector","classList","remove","Date","length","timestamp","toDate","toUTCString","message","displayName","onChange","e","target","type","placeholder","preventDefault","add","FieldValue","serverTimestamp","actionType","Login","dispatch","Button","style","color","background","signInWithPopup","then","result","catch","err","alert","SidebarChats","addNewChat","id","prompt","to","Avatar","src","Profile","Sidebar","rooms","setRooms","uid","room","App","path","exact","ReactDOM","render","username","state","action","getElementById"],"mappings":"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","file":"static/js/main.aa33b06c.chunk.js","sourcesContent":["import firebase from \"firebase\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCWITDBqlWNHajkbzQYvTKnaoeXo4tpM7o\",\n  authDomain: \"whatsapp-clone-840ac.firebaseapp.com\",\n  projectId: \"whatsapp-clone-840ac\",\n  storageBucket: \"whatsapp-clone-840ac.appspot.com\",\n  messagingSenderId: \"217993161224\",\n  appId: \"1:217993161224:web:6d5deab2d11939795d7fbd\",\n};\n\nconst app = firebase.initializeApp(firebaseConfig);\n\nconst db = app.firestore();\nconst auth = app.auth();\nconst provider = new firebase.auth.GoogleAuthProvider();\n\nexport { auth, provider };\nexport default db;\n","import React, { createContext, useContext, useReducer } from \"react\";\n\nexport const StateContext = createContext();\n\nexport const StateProvider = ({ reducer, initialState, children }) => {\n  return (\n    <StateContext.Provider value={useReducer(reducer, initialState)}>\n      {children}\n    </StateContext.Provider>\n  );\n};\n\nexport const useStateValue = () => useContext(StateContext);\n","import React, { useEffect, useState } from \"react\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport \"./Chat.css\";\nimport { useParams } from \"react-router-dom\";\nimport db from \"../Firebase/firebase\";\nimport { useStateValue } from \"../Context/StateProvider\";\nimport firebase from \"firebase\";\nimport { ArrowBack } from \"@material-ui/icons\";\n\nfunction Chat() {\n  const [input, setInput] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n  const [{ user }, dispatch] = useStateValue();\n  const { roomId } = useParams();\n  const [roomName, setRoomName] = useState(\"\");\n\n  const handleArrow = () => {\n    document.querySelector(\".chat\").classList.remove(\"show\");\n  };\n\n  useEffect(() => {\n    if (roomId) {\n      db.collection(\"rooms\")\n        .doc(roomId)\n        .onSnapshot((snapshot) => {\n          setRoomName(snapshot.data().name);\n        });\n      db.collection(\"rooms\")\n        .doc(roomId)\n        .collection(\"messages\")\n        .orderBy(\"timestamp\", \"asc\")\n        .onSnapshot((snapshot) => {\n          setMessages(\n            snapshot.docs.map((doc) => {\n              return doc.data();\n            })\n          );\n        });\n    }\n  }, [roomId]);\n  console.log(messages);\n  const sendMessage = (e) => {\n    e.preventDefault();\n    db.collection(\"rooms\").doc(roomId).collection(\"messages\").add({\n      message: input,\n      name: user.displayName,\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n    });\n    setInput(\"\");\n  };\n  return (\n    <div className=\"chat\">\n      <div className=\"chat-header\">\n        <ArrowBack onClick={handleArrow} />\n        <h2>{roomName}</h2>\n        <p>\n          Last seen at\n          {new Date(\n            messages[messages.length - 1]?.timestamp?.toDate()\n          ).toUTCString()}\n        </p>\n      </div>\n      <div className=\"chat-body\">\n        {messages.map((message) => {\n          return (\n            <p\n              className={`chat-message ${\n                message.name === user.displayName && \"chat-reciever\"\n              }`}\n            >\n              <span className=\"chat-name\">{message.name}</span>\n              {message.message}\n              <span className=\"chat-timestamp\">\n                {new Date(message.timestamp?.toDate()).toUTCString()}\n              </span>\n            </p>\n          );\n        })}\n      </div>\n      <form className=\"chat-footer\">\n        <input\n          value={input}\n          onChange={(e) => {\n            setInput(e.target.value);\n          }}\n          type=\"text\"\n          placeholder=\"Write a message\"\n        />\n\n        <button onClick={sendMessage} type=\"submit\">\n          <SendIcon />\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default Chat;\n","export const initialState = {\n  user: null,\n  username: null,\n};\n\nexport const actionType = {\n  SET_USER: \"SET_USER\",\n};\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case actionType.SET_USER:\n      return { ...state, user: action.user };\n\n    default:\n      return state;\n  }\n};\n","import { Button } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { actionType } from \"../Context/Reducer\";\nimport { useStateValue } from \"../Context/StateProvider\";\nimport { auth, provider } from \"../Firebase/firebase\";\nimport \"./Login.css\";\n\nfunction Login() {\n  const [{ user }, dispatch] = useStateValue();\n  const signIn = () => {\n    auth\n      .signInWithPopup(provider)\n      .then((result) => {\n        dispatch({ type: actionType.SET_USER, user: result.user });\n      })\n      .catch((err) => {\n        alert(err.message);\n      });\n  };\n  return (\n    <div className=\"login\">\n      <Button style={{ color: \"#fff\", background: \"#000\" }} onClick={signIn}>\n        Sign In\n      </Button>\n    </div>\n  );\n}\n\nexport default Login;\n","export default __webpack_public_path__ + \"static/media/undraw_profile_pic_ic5t (1).19cef30a.png\";","import { Avatar } from \"@material-ui/core\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./SidebarChats.css\";\nimport Profile from \"../Assets/undraw_profile_pic_ic5t (1).png\";\nimport db from \"../Firebase/firebase\";\nimport { Link } from \"react-router-dom\";\nfunction SidebarChats({ addNewChat, name, id }) {\n  const [messages, setMessages] = useState([]);\n  const createChat = () => {\n    const roomName = prompt(\"Please enter a name for room\");\n    if (roomName) {\n      db.collection(\"rooms\").add({\n        name: roomName,\n      });\n    }\n  };\n\n  const handleChat = () => {\n    document.querySelector(\".chat\").classList.add(\"show\");\n  };\n\n  useEffect(() => {\n    if (id) {\n      db.collection(\"rooms\")\n        .doc(id)\n        .collection(\"messages\")\n        .orderBy(\"timestamp\", \"desc\")\n        .onSnapshot((snapshot) => {\n          setMessages(snapshot.docs.map((doc) => doc.data()));\n        });\n    }\n    return () => {};\n  }, [id]);\n\n  return !addNewChat ? (\n    <Link to={`/rooms/${id}`}>\n      <div onClick={handleChat} className=\"sidebar-chat\">\n        <Avatar src={Profile} />\n        <div className=\"sidebar-chat-info\">\n          <h2>{name}</h2>\n          <p>{messages[0]?.message}</p>\n        </div>\n      </div>\n    </Link>\n  ) : (\n    <div onClick={createChat} className=\"add sidebar-chat\">\n      <h2>Add New Room</h2>\n    </div>\n  );\n}\n\nexport default SidebarChats;\n","import db from \"../Firebase/firebase\";\nimport React, { useEffect, useState } from \"react\";\nimport \"./Sidebar.css\";\nimport SidebarChats from \"./SidebarChats\";\nimport { useStateValue } from \"../Context/StateProvider\";\nfunction Sidebar() {\n  const [rooms, setRooms] = useState([]);\n  const [{ user }, dispatch] = useStateValue();\n  console.log(user.uid);\n  useEffect(() => {\n    db.collection(\"rooms\").onSnapshot((snapshot) => {\n      setRooms(\n        snapshot.docs.map((doc) => {\n          return {\n            id: doc.id,\n            data: doc.data(),\n          };\n        })\n      );\n    });\n  }, []);\n\n  return (\n    <div className=\"sidebar\">\n      {user.uid === \"5Ifr9Tmo5dSH1YLUmPypS3LuCXg1\" ? (\n        <SidebarChats addNewChat />\n      ) : null}\n\n      {rooms.map((room) => {\n        return (\n          <SidebarChats key={room.id} id={room.id} name={room.data.name} />\n        );\n      })}\n    </div>\n  );\n}\nexport default Sidebar;\n","import React, { useState } from \"react\";\nimport { Route, BrowserRouter as Router } from \"react-router-dom\";\nimport \"./App.css\";\nimport Chat from \"./Components/Chat\";\nimport Login from \"./Components/Login\";\nimport Sidebar from \"./Components/Sidebar\";\nimport { useStateValue } from \"./Context/StateProvider\";\n\nfunction App() {\n  const [{ user }, dispatch] = useStateValue();\n\n  return (\n    <div className=\"app\">\n      {!user ? (\n        <Login />\n      ) : (\n        <div className=\"app-body\">\n          <Router>\n            <Route path=\"/\">\n              <Sidebar className=\"mysidebar\" />\n            </Route>\n            <Route exact path=\"/rooms/:roomId\">\n              <Chat />\n            </Route>\n          </Router>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { initialState, reducer } from \"./Context/Reducer\";\nimport { StateProvider } from \"./Context/StateProvider\";\n\nReactDOM.render(\n  <StateProvider initialState={initialState} reducer={reducer}>\n    <App />\n  </StateProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}